<!DOCTYPE html>
<html>
<head>
	<title> DeporWEB</title>
<body class="text-center">

<main class="form-signin">

    <h1 class="h3 mb-3 fw-normal" id="user_name">DeporWEB</h1>

    <button onclick="IniciarconGoogle()" class="w-100 btn btn-lg btn-primary" id="login_btn">Iniciar sesion con Google</button>

    <button onclick="logout()" style="display: none;" class="w-100 btn btn-lg btn-danger" id="logout_btn">Salir</button>
</main>

        <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyDl46kFOagDkvgu8m_TPzFA0n7Do2vxbhE",
    authDomain: "deporweb50.firebaseapp.com",
    projectId: "deporweb50",
    storageBucket: "deporweb50.appspot.com",
    messagingSenderId: "28702197046",
    appId: "1:28702197046:web:3bcbc8090902625f5e5f97",
    measurementId: "G-81RFLKTZFT"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
     
  <script type="text/javascript">
    //variables
    var login_btn     = document.getElementById("login_btn"),
      logout_btn      = document.getElementById("logout_btn"),
      user_image      = document.getElementById("user_image"),
      user_name_h1    = document.getElementById("user_name");

    //iniciar con Google
    var loginWithGoogle = function(){

      var provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth().signInWithPopup(provider).then(function(result) {
      // This gives you a Google Access Token. You can use it to access the Google API.
      var token = result.credential.accessToken;
      // The signed-in user info.
      var user = result.user;

      console.log(user.displayName);
      updateUser(user);
      // ...
    }).catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      // The email of the user's account used.
      var email = error.email;
      // The firebase.auth.AuthCredential type that was used.
      var credential = error.credential;
      // ...

      console.log(errorMessage);
    });
    }

    var updateUser = function(user){
      user_name_h1.innerHTML = "Hola, " + user.displayName;
      user_image.src = user.photoURL;

      login_btn.style.display = "none";
      logout_btn.style.display = "inline-block";
    }

    var logout = function(){
      firebase.auth().signOut().then(function() {
        user_name_h1.innerHTML = "Acceso";
        login_btn.style.display = "inline-block";
        logout_btn.style.display = "none";

    }).catch(function(error) {
    });

    }


  </script>

</body>
	
</html>
